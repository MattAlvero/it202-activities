<!Doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        
        <!-- Bootstrap CSS Link -->
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
        
        <title>Activity 4.3</title>
    </head>
    <body>
        <div class="card template" style="width: 18rem;">
          <div class="card-body">
            <h5 class="card-title">Card title</h5>
            <h6 class="card-subtitle mb-2 text-muted">Card subtitle</h6>
            <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
            <a href="#" class="card-link">Card link</a>
            <a href="#" class="card-link">Another link</a>
          </div>
        </div>

        <script>
            let apiEP="https://data.cityofchicago.org/resource/xzkq-xp2w.json?$LIMIT=100";
            
            fetch(apiEP)
            .then(response => {return response.json()})
            .then(json => { console.log(json) 
                for (let x of json) {
                    console.log(x);
                    // --------- Creating p elements ---------
                    //let p = document.createElement("p");
                    //p.textContent = "Name: " + x["name"] + " " + "Job: " + x["job_titles"] + " " + "Department: " + x["department"]
                    //document.body.appendChild(p);
                    var template = document.querySelector(".template");
                    let copy = template.cloneNode(true);
                    copy.classList.remove("template");
                    copy.querySelector("h5.card-title").textContent = x["name"];
                    copy.querySelector("h6.card-subtitle").textContent = x["department"];
                    copy.querySelector("p.card-text").textContent = x["job_titles"];
                    document.body.appendChild(copy);
                    
                }
            });       
            
            
        </script>
    </body>
</html>